<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Send Your Prayers</title>
  <link rel="icon" type="image/png" href="icons8-bmw-100.png">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .carousel-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      height: 500px; /* lock height */
      overflow: hidden;
    }
    .carousel-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .carousel-slide.active {
      opacity: 1;
      transform: translateX(0);
      z-index: 2;
    }
    .carousel-slide.left {
      transform: translateX(-100%);
    }
    .carousel-slide.right {
      transform: translateX(100%);
    }
    .instructions {
      margin-top: 10px;
      font-size: 16px;
      text-align: center;
    }
    .timer {
      margin-top: 5px;
      font-size: 14px;
      text-align: center;
    }
    .message-box {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 400px;
    }
    input {
      padding: 10px;
      width: 100%;
      max-width: 300px;
      border: none;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      background-color: #444;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #666;
    }
    .floating-emote {
      position: absolute;
      font-size: 30px;
      animation: floatUp 2s ease-out forwards;
    }
    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-150px); }
    }
  </style>
</head>
<body>

  <div class="carousel-container" id="carousel">
    <img src="image1.jpg" class="carousel-slide active">
    <img src="image2.jpg" class="carousel-slide">
    <img src="image3.jpg" class="carousel-slide">
  </div>

  <div class="instructions">Swipe left or right to see more</div>
  <div class="timer" id="timer"></div>

  <div class="message-box">
    <h2>Send Your Prayers</h2>
    <input type="text" id="messageInput" placeholder="Write your message...">
    <button id="sendButton">Send a Prayer</button>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js" defer></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js" defer></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // --- Firebase Config ---
      const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        databaseURL: "YOUR_DATABASE_URL",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
      };
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const db = firebase.database();

      // --- Send Message ---
      const sendBtn = document.getElementById("sendButton");
      const input = document.getElementById("messageInput");
      sendBtn.addEventListener("click", () => {
        const msg = input.value.trim();
        if (!msg) return;
        const msgRef = db.ref("messages").push();
        msgRef.set({ text: msg, timestamp: Date.now() }, () => {
          // floating emote
          createFloatingEmote("🙏");
          input.value = "";
        });
      });

      // --- Floating Emote ---
      function createFloatingEmote(emote) {
        const span = document.createElement("span");
        span.className = "floating-emote";
        span.textContent = emote;
        span.style.left = (window.innerWidth/2 - 10) + "px";
        span.style.top = (window.innerHeight/2) + "px";
        document.body.appendChild(span);
        setTimeout(() => document.body.removeChild(span), 2000);
      }

      // --- Timer ---
      const timerEl = document.getElementById("timer");
      const startTime = new Date("2025-08-13T07:45:00").getTime();
      function updateTimer() {
        const now = Date.now();
        let diff = now - startTime;
        if (diff < 0) diff = 0;

        const sec = Math.floor(diff/1000) % 60;
        const min = Math.floor(diff/(1000*60)) % 60;
        const hr = Math.floor(diff/(1000*60*60)) % 24;
        const days = Math.floor(diff/(1000*60*60*24)) % 7;
        const weeks = Math.floor(diff/(1000*60*60*24*7)) % 4;
        const months = Math.floor(diff/(1000*60*60*24*30.44)) % 12;
        const years = Math.floor(diff/(1000*60*60*24*365.25));

        let parts = [];
        if (years > 0) parts.push(`${years}y`);
        if (months > 0 || years > 0) parts.push(`${months}mo`);
        if (weeks > 0 || months > 0 || years > 0) parts.push(`${weeks}w`);
        parts.push(`${days}d ${hr}h ${min}m ${sec}s`);
        timerEl.textContent = parts.join(" ");
      }
      updateTimer();
      setInterval(updateTimer, 1000);

      // --- Carousel ---
      const slides = document.querySelectorAll(".carousel-slide");
      let current = 0;
      function showSlide(index) {
        slides.forEach((s, i) => {
          s.classList.remove("active", "left", "right");
          if (i === index) {
            s.classList.add("active");
          } else if (i < index) {
            s.classList.add("left");
          } else {
            s.classList.add("right");
          }
        });
        current = index;
      }
      let startX = 0;
      document.getElementById("carousel").addEventListener("touchstart", e => {
        startX = e.touches[0].clientX;
      });
      document.getElementById("carousel").addEventListener("touchend", e => {
        const endX = e.changedTouches[0].clientX;
        if (startX - endX > 50) {
          // swipe left
          showSlide((current + 1) % slides.length);
        } else if (endX - startX > 50) {
          // swipe right
          showSlide((current - 1 + slides.length) % slides.length);
        }
      });
    });
  </script>
</body>
</html>